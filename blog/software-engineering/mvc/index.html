<!DOCTYPE html>
<html lang="en">
<head>
  <title>MVC – Lucas David</title>
  <meta charset="utf-8" />
<meta content='text/html; charset=utf-8' http-equiv='Content-Type'>
<meta http-equiv='X-UA-Compatible' content='IE=edge'>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="image_src" type="image/png" href="img_path" />


<meta name="description" content="Going Through the Model-View-Controller Pattern." />
<meta property="og:description" content="Going Through the Model-View-Controller Pattern." />
<meta property="og:image" content="" />

<meta name="author" content="Lucas David" />


<meta property="og:title" content="MVC" />
<meta property="twitter:title" content="MVC" />


<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">

<link rel="alternate" type="application/rss+xml" title="Lucas David - my personal website/blog"
      href="/feed.xml" />

  
  
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-LG7FZ8VCHM"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());

	  gtag('config', 'G-LG7FZ8VCHM');
	</script>


  
  <!--[if lt IE 9]>
  <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
<link rel="stylesheet" type="text/css" href="/style.css" />

</head>
<body>
  <nav id="mainNav" class="navbar navbar-light bg-white navbar-expand-lg d-print-none border-bottom border-light ">
  <div class="container-xl">
    <button class="navbar-toggler rounded-0 border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navbarTogglerDemo01"
      aria-controls="navbarTogglerDemo01" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <a class="navbar-brand fw-bold text-decoration-none p-1" href="/">Lucas David</a>

    <div class="collapse navbar-collapse" id="navbarTogglerDemo01">

      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
      </ul>
      <span class="navbar-text navbar-excerpt">
        MVC
      </span>
      <span class="navbar-text font-small ms-2 me-2 sr-none" aria-hidden="true">•</span>
      <ul class="navbar-nav mb-2 mb-lg-0 font-small">
        <li class="nav-item"><a href="/" class="nav-link fw-bold link-dark fs-6">Home</a></li>
        <li class="nav-item"><a href="/blog" class="nav-link fw-bold link-dark fs-6">Blog</a></li>
        <li class="nav-item"><a href="/publications" class="nav-link fw-bold link-dark fs-6">Publications</a></li>

        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle fw-bold link-dark fs-6" href="#" id="nbd-links-social" role="button"
            data-bs-toggle="dropdown" aria-expanded="false">
            Social
          </a>
          <ul class="dropdown-menu font-small dropdown-menu-end" aria-labelledby="nbd-links-social">
            <li><a class="dropdown-item text-decoration-none" target="_blank"
                href="https://github.com/lucasdavid">
                <i aria-label="GitHub" class="bi bi-github link-dark sr-none"></i>
                Github</a></li>
            <li><a class="dropdown-item text-decoration-none" target="_blank"
                href="https://www.linkedin.com/in/ld7">
                <i class="bi bi-linkedin text-primary sr-none"></i>
                Linkedin</a></li>

            <li itemscope itemtype="https://schema.org/Person">
              <a itemprop="sameAs" content="https://orcid.org/0000-0002-8793-7300" href="https://orcid.org/0000-0002-8793-7300"
                  target="orcid.widget"
                  rel="me noopener noreferrer"
                  class="dropdown-item text-decoration-none"
                >
                <img src="/assets/images/infra/32px-ORCID_iD.webp" alt="ORCID logo" class="sr-none" style="margin-bottom: 5px; width: 16px;">
                ORCID</a>
            </li>

            <li><a class="dropdown-item text-decoration-none" target="_blank"
                href="http://stackoverflow.com/users/2429640/lucasdavid">
                <i class="bi bi-code-slash link-dark sr-none"></i>
                Stackoverflow</a></li>
            <li><a class="dropdown-item text-decoration-none" target="_blank"
                href="https://youtube.com/channel/UC7IWeKUy4OSlC5ripcQGD6Q">
                <i class="bi bi-youtube text-danger sr-none"></i>
                Youtube</a></li>
          </ul>
        </li>
      </ul>
    </div>
  </div>
</nav>

  <div class="empty-v-space d-none d-xl-block" style="margin-bottom: 5vh"></div>
</div>
<div class="container-fluid mt-4">
  <div class="row">
    <div class="col-12 col-xl-3 col-xxl-2 offset-xxl-1">
      <div id="sidebar" class="">
  <div class="text-center">
    <a href="/" title="Home">
      <img src="/assets/images/infra/aloy-100.png" alt="Aloy, a character from Horizon Zero Dawn."
        class="img-fluid rounded-circle" style="width:100px" />
    </a>
    <p class="pt-2 font-small">
      
        <a href="mailto:mb37410l3@mozmail.com" class="text-decoration-none fw-bold">mb37410l3@mozmail.com</a>
      
    </p>
  </div>

  
</div>

    </div>
    <div id="table-of-contents-container-r" class="col-12 col-xl-3 col-xxl-2 order-xl-2">
      
      <div style="z-index: 0; font-size:0.8rem;">
        <div id="table-of-contents" class="font-small">
  <p class="border-bottom"><strong>Summary</strong></p>
  <ul id="toc" class="section-nav">
<li class="toc-entry toc-h2"><a href="#why-mvc">Why MVC?</a></li>
<li class="toc-entry toc-h2"><a href="#some-php-practice-wont-hurt">Some PHP practice won’t hurt…</a></li>
<li class="toc-entry toc-h2"><a href="#mvc-frameworks">MVC Frameworks</a></li>
<li class="toc-entry toc-h2"><a href="#a-simple-forum-application">A simple forum application.</a>
<ul>
<li class="toc-entry toc-h3"><a href="#creating-the-application">Creating the application</a></li>
<li class="toc-entry toc-h3"><a href="#inserting-a-model">Inserting a model</a></li>
<li class="toc-entry toc-h3"><a href="#scaffolding">Scaffolding</a></li>
<li class="toc-entry toc-h3"><a href="#authentication">Authentication</a></li>
<li class="toc-entry toc-h3"><a href="#customizing-the-views">Customizing the views</a></li>
<li class="toc-entry toc-h3"><a href="#what-now">What now?</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#conclusion">Conclusion</a></li>
<li class="toc-entry toc-h2"><a href="#some-references">Some references</a></li>
</ul>
</div>

      </div>
      
    </div>
    <div class="col-12 col-xl-6">
      <article class="post mb-4">
        <header class="">
          <h1 id="postTitle" class="fw-bold">MVC</h1>
          <p class="right-align mb-2 text-muted fs-5">
            Going Through the Model-View-Controller Pattern. <em>— October  2, 2017</em>
          </p>
          <div class="mb-4">
            <span class="badges-container">
  
    <a href="/blog/tag/patterns"
       class="btn badge rounded-pill btn-dark text-bg-dark text-decoration-none"
       style="font-size: 0.8em;"
       type="button"
       role="button"
       >Patterns</a>
  
</span>

          </div>
        </header>
        <div class="article-content" style="margin-top: 4rem;">
          <p><span>I</span> can’t wait to get to the advanced topics such as N-Tier and REST! But they just won’t make any sense - or at least they won’t be so easily digested - until we’re all familiar with some other concepts, such as MVC. Let’s make it quick then: <a href="http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller">MVC</a> stands for <strong>Model-View-Controller</strong> and it’s an architectural/design pattern (see <a href="http://stackoverflow.com/questions/1866821/is-mvc-a-design-pattern-or-architectural-pattern">an instance of the discussion</a> and a <a href="http://stackoverflow.com/a/1866853/2429640">reasonable opinion</a>).</p>

<h2 id="why-mvc">Why MVC?</h2>
<p>Consider 30 or 20 years ago: we had a completely different scenario from today, where scripting was acceptable and <a href="http://en.wikipedia.org/wiki/Spaghetti_code">spaghetti code</a> was a common thing. Unfortunately, some people still put some effort in order to go back to that state. Take a look at <a href="http://www.w3schools.com/php/php_echo_print.asp">these examples</a>. Although it works, this programming style clearly lacks organization and will most likely result in hours of debugging in order to fix simple issues.</p>

<p>MVC defends this idea that once one’s code is separated between three main layers, it becomes much simpler and easier to maintain and improve. Here is a basic idea of the layers:</p>

<ul>
  <li>Models - the core, where the domain classes and your business logic are. E.g.: <code class="language-plaintext highlighter-rouge">Users</code>, <code class="language-plaintext highlighter-rouge">Roles</code>, <code class="language-plaintext highlighter-rouge">Posts</code>, <code class="language-plaintext highlighter-rouge">Permissions</code>, <code class="language-plaintext highlighter-rouge">Tags</code>, <code class="language-plaintext highlighter-rouge">Classes</code>, <code class="language-plaintext highlighter-rouge">Accounts</code>, <code class="language-plaintext highlighter-rouge">Musics</code>, <code class="language-plaintext highlighter-rouge">Channels</code> etc. In another words: anything that should be persisted to create your systems logic.</li>
  <li>Controllers - coordinates models and views. In many modern MVC frameworks, it’s also responsible for handling users requests, authentication, authorization, filtering, security checking, validation etc. That is: allows the users to actually operate the application.</li>
  <li>Views - containing all the presentation. This is were all the presentation code is (including HTML and CSS, when talking about web), staying completely separate from logic (models).</li>
</ul>

<div style="" class="text-center">
  <figure class="figure ">
    <img src="/assets/images/posts/mvc/mvc-diagram.webp" alt="MVC Architecture diagram." class="figure-img img-fluid rounded mx-auto d-block w-100" />

    
  <figcaption class="figure-caption text-start">
    <strong class="title"></strong>

    MVC Architecture diagram.
  </figcaption>


  </figure>
</div>

<h2 id="some-php-practice-wont-hurt">Some PHP practice won’t hurt…</h2>
<p>There is this sequence of 9 short tutorials on YouTube, called <a href="https://www.youtube.com/watch?list=PLfdtiltiRHWGXVHXX09fxXDi-DqInchFD">Build a PHP MVC Application</a>, which teaches us how to develop a simple structure characteristically present in <code class="language-plaintext highlighter-rouge">MVC frameworks</code>. It is specially similar to <a href="http://laravel.com">Laravel</a>. If you have no idea what <code class="language-plaintext highlighter-rouge">MVC</code> is, I strongly suggest you to try to catch up with this channel, specially if you like <code class="language-plaintext highlighter-rouge">PHP</code>.</p>

<h2 id="mvc-frameworks">MVC Frameworks</h2>
<p>Most people don’t want to make their own project structures, as crafting a project from scratch can be hard to accomplish. That’s why we have MVC frameworks! They were created to provide a starting point and let us concentrate on our domain problem. Many of them are similar, as many are deeply inspired on the ideas proposed by <a href="http://en.wikipedia.org/wiki/Ruby_on_Rails">Ruby on Rails</a>.</p>

<h2 id="a-simple-forum-application">A simple forum application.</h2>
<p>In order to demonstrate some of this in practice, let’s create a micro forum application. I’ll use the <code class="language-plaintext highlighter-rouge">.NET Framework</code>.</p>

<h3 id="creating-the-application">Creating the application</h3>
<p>Go to <strong>File &gt; New project &gt; ASP.NET Web Application &gt; MVC</strong>. Notice that once the project is created, all the MVC structure has been put there for you to use! You don’t have to do anything! Just hit <code class="language-plaintext highlighter-rouge">Ctrl+F5</code> to see your web application working.</p>

<h3 id="inserting-a-model">Inserting a model</h3>
<p>Always start designing your data. Here, I’ll use this strategy called <a href="https://www.asp.net/mvc/overview/getting-started/getting-started-with-ef-using-mvc/creating-an-entity-framework-data-model-for-an-asp-net-mvc-application">Code First</a>, which allows me to write my classes and export them to a database using automatic migrations. So select your <code class="language-plaintext highlighter-rouge">Models</code> folder, hit <code class="language-plaintext highlighter-rouge">Ctrl+Shift+A</code> and add a new class called <code class="language-plaintext highlighter-rouge">Post</code>. Add the following properties to the class:</p>
<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">using</span> <span class="nn">System.ComponentModel.DataAnnotations</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">YCodingForum.Models</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">Post</span>
    <span class="p">{</span>
        <span class="p">[</span><span class="n">Key</span><span class="p">]</span>
        <span class="k">public</span> <span class="kt">int</span> <span class="n">Id</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>

        <span class="p">[</span><span class="n">Required</span><span class="p">]</span>
        <span class="p">[</span><span class="nf">MinLength</span><span class="p">(</span><span class="m">4</span><span class="p">)]</span>
        <span class="p">[</span><span class="nf">MaxLength</span><span class="p">(</span><span class="m">35</span><span class="p">)]</span>
        <span class="k">public</span> <span class="kt">string</span> <span class="n">Title</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>

        <span class="p">[</span><span class="nf">MaxLength</span><span class="p">(</span><span class="m">50</span><span class="p">)]</span>
        <span class="k">public</span> <span class="kt">string</span> <span class="n">Lead</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>

        <span class="p">[</span><span class="nf">MaxLength</span><span class="p">(</span><span class="m">4096</span><span class="p">)]</span>
        <span class="k">public</span> <span class="kt">string</span> <span class="n">Content</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<blockquote>
  <p><strong>#1</strong> Notice how I’ve defined rules for my model: in order to be considered <code class="language-plaintext highlighter-rouge">valid</code>, an instance of <code class="language-plaintext highlighter-rouge">Post</code> needs a <code class="language-plaintext highlighter-rouge">Title</code> with length greater or equal than 4 and smaller or equal to 35, a <code class="language-plaintext highlighter-rouge">Lead</code> smaller or equal to 50 and a <code class="language-plaintext highlighter-rouge">Content</code> smaller or equal than 4096.</p>
</blockquote>

<h3 id="scaffolding">Scaffolding</h3>
<p>Now right click over the <strong>Controllers &gt; Add &gt; Controller &gt; MVC 5 Controller with views, using Entity Framework</strong>. Select the model class <code class="language-plaintext highlighter-rouge">Post (YCodingForum.Models)</code>, which you just created, and the default context <code class="language-plaintext highlighter-rouge">ApplicationDbContext (YCodingForum.Models)</code>. Don’t use <code class="language-plaintext highlighter-rouge">asynchronous controllers</code> yet (although they are awesome, we’re going for simplicity). Make sure <code class="language-plaintext highlighter-rouge">Generate views</code> is enable and hit <code class="language-plaintext highlighter-rouge">Add</code>.</p>

<p>Build the project with <code class="language-plaintext highlighter-rouge">Ctrl+Shift+B</code>, run it <code class="language-plaintext highlighter-rouge">Ctrl+F5</code> and use your browser to navigate to <code class="language-plaintext highlighter-rouge">localhost:port/Posts</code> and insert some new posts, if you want. That is already using a local database (which was automatically created).</p>

<p>Go back to the <code class="language-plaintext highlighter-rouge">PostsController</code> and take a look: each method in a controller class is a <a href="https://msdn.microsoft.com/en-us/library/dd410269%28v=vs.100%29.aspx">action</a>, which can be accessed through the web. Write your own, if you want:</p>
<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="n">ActionResult</span> <span class="nf">Recent</span><span class="p">()</span>
<span class="p">{</span>
    <span class="kt">var</span> <span class="n">recent</span> <span class="p">=</span> <span class="n">db</span><span class="p">.</span><span class="n">Posts</span>
        <span class="p">.</span><span class="nf">OrderByDescending</span><span class="p">(</span><span class="n">p</span> <span class="p">=&gt;</span> <span class="n">p</span><span class="p">.</span><span class="n">Id</span><span class="p">)</span>
        <span class="p">.</span><span class="nf">Take</span><span class="p">(</span><span class="m">10</span><span class="p">)</span>
        <span class="p">.</span><span class="nf">ToList</span><span class="p">();</span>

    <span class="k">return</span> <span class="nf">View</span><span class="p">(</span><span class="n">recent</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Now <strong>right-click over the action that you’ve just created &gt; Add view &gt; Template: List &gt; Model class: Post (YCodingForum.Models) &gt; Add</strong>. Compile the project and go to <code class="language-plaintext highlighter-rouge">localhost:port/Posts/Recent</code>. You should be able to see the last 10 posts made (if you added them)!</p>

<blockquote>
  <p><strong>#2</strong> I know that all you’ve done was basically scaffolding, but look how far you already are! Do you still want to keep scripting <code class="language-plaintext highlighter-rouge">php</code> coupled with <code class="language-plaintext highlighter-rouge">html</code> code? :-)</p>
</blockquote>

<h3 id="authentication">Authentication</h3>
<p>In order to prevent users that are not authenticated from creating, editing and deleting posts, go to the <code class="language-plaintext highlighter-rouge">PostsController</code> and add <code class="language-plaintext highlighter-rouge">[Authorize]</code> in each operation <code class="language-plaintext highlighter-rouge">Create</code>, <code class="language-plaintext highlighter-rouge">Update</code> and <code class="language-plaintext highlighter-rouge">Delete</code>:</p>
<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="n">Authorize</span><span class="p">]</span>
<span class="k">public</span> <span class="n">ActionResult</span> <span class="nf">Create</span><span class="p">()</span>
<span class="p">{</span>
    <span class="p">...</span>
<span class="p">}</span>

<span class="p">[</span><span class="n">Authorize</span><span class="p">]</span>
<span class="p">[</span><span class="n">HttpPost</span><span class="p">]</span>
<span class="p">[</span><span class="n">ValidateAntiForgeryToken</span><span class="p">]</span>
<span class="k">public</span> <span class="n">ActionResult</span> <span class="nf">Create</span><span class="p">(</span>
    <span class="p">[</span><span class="nf">Bind</span><span class="p">(</span><span class="n">Include</span> <span class="p">=</span> <span class="s">"Title,Lead,Content"</span><span class="p">)]</span> <span class="n">Post</span> <span class="n">post</span><span class="p">)</span>
<span class="p">{</span>
    <span class="p">...</span>
<span class="p">}</span>

<span class="p">...</span>

</code></pre></div></div>

<p>Let’s give these <code class="language-plaintext highlighter-rouge">posts</code> <code class="language-plaintext highlighter-rouge">authors</code>! First, delete all posts previously created. Then go to your <code class="language-plaintext highlighter-rouge">Post</code> class and add the following property:</p>
<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">Post</span>
<span class="p">{</span>
    <span class="p">...</span>

    <span class="p">[</span><span class="nf">ForeignKey</span><span class="p">(</span><span class="s">"Author"</span><span class="p">)]</span>
    <span class="k">public</span> <span class="kt">string</span> <span class="n">AuthorId</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
    <span class="k">public</span> <span class="k">virtual</span> <span class="n">ApplicationUser</span> <span class="n">Author</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>We want the author of a Post to be the currently authenticated user. So go to <code class="language-plaintext highlighter-rouge">PostsController</code> and add the following line to the top:</p>
<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">using</span> <span class="nn">Microsoft.AspNet.Identity</span><span class="p">;</span>
</code></pre></div></div>

<p>Now modify the <code class="language-plaintext highlighter-rouge">create</code> post action:</p>
<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="n">Authorize</span><span class="p">]</span>
<span class="p">[</span><span class="n">HttpPost</span><span class="p">]</span>
<span class="p">[</span><span class="n">ValidateAntiForgeryToken</span><span class="p">]</span>
<span class="k">public</span> <span class="n">ActionResult</span> <span class="nf">Create</span><span class="p">(</span>
    <span class="p">[</span><span class="nf">Bind</span><span class="p">(</span><span class="n">Include</span> <span class="p">=</span> <span class="s">"Title,Lead,Content"</span><span class="p">)]</span> <span class="n">Post</span> <span class="n">post</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">ModelState</span><span class="p">.</span><span class="n">IsValid</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">post</span><span class="p">.</span><span class="n">AuthorId</span> <span class="p">=</span> <span class="n">User</span><span class="p">.</span><span class="n">Identity</span><span class="p">.</span><span class="nf">GetUserId</span><span class="p">();</span>

        <span class="n">db</span><span class="p">.</span><span class="n">Posts</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">post</span><span class="p">);</span>
        <span class="n">db</span><span class="p">.</span><span class="nf">SaveChanges</span><span class="p">();</span>
        <span class="k">return</span> <span class="nf">RedirectToAction</span><span class="p">(</span><span class="s">"Index"</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nf">View</span><span class="p">(</span><span class="n">post</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Now if you try to compile and run your application, you’ll probably get an error. That happens because you’ve changed your models and the database is still the same. To fix that: <code class="language-plaintext highlighter-rouge">Ctrl+Q</code>, type <code class="language-plaintext highlighter-rouge">Package Manage Console</code> and write the following commands:</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Enable-Migrations <span class="nt">-EnableAutomaticMigrations</span>
Update-Database <span class="nt">-Force</span>
</code></pre></div></div>

<blockquote>
  <p><strong>#3</strong> You do have to run <code class="language-plaintext highlighter-rouge">Update-Database</code> command every time you change you models. I know it sucks, but what can we do? This isn’t MongoDB. :-(</p>
</blockquote>

<p>Run your application! If you try to create a new post, it’s going to redirect you to the login/registration page. Just make an account and go back to creating your post.</p>

<h3 id="customizing-the-views">Customizing the views</h3>
<p>Now, if we want to show these posts in the main page, we need to feed the <code class="language-plaintext highlighter-rouge">Home.Index</code> view with a list of posts. In the <code class="language-plaintext highlighter-rouge">HomeController</code>, add the header <code class="language-plaintext highlighter-rouge">using System.Data.Entity;</code> add the reference to the <code class="language-plaintext highlighter-rouge">ApplicationDbContext</code>, just like it is in <code class="language-plaintext highlighter-rouge">PostsController</code>:</p>
<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">private</span> <span class="n">ApplicationDbContext</span> <span class="n">db</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">ApplicationDbContext</span><span class="p">();</span>
</code></pre></div></div>

<p>Update the <code class="language-plaintext highlighter-rouge">Index</code> action:</p>
<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="n">ActionResult</span> <span class="nf">Index</span><span class="p">()</span>
<span class="p">{</span>
    <span class="kt">var</span> <span class="n">posts</span> <span class="p">=</span> <span class="n">db</span><span class="p">.</span><span class="n">Posts</span>
        <span class="p">.</span><span class="nf">Include</span><span class="p">(</span><span class="n">post</span> <span class="p">=&gt;</span> <span class="n">post</span><span class="p">.</span><span class="n">Author</span><span class="p">)</span>
        <span class="p">.</span><span class="nf">OrderByDescending</span><span class="p">(</span><span class="n">p</span> <span class="p">=&gt;</span> <span class="n">p</span><span class="p">.</span><span class="n">Id</span><span class="p">)</span>
        <span class="p">.</span><span class="nf">Take</span><span class="p">(</span><span class="m">5</span><span class="p">);</span>

    <span class="k">return</span> <span class="nf">View</span><span class="p">(</span><span class="n">posts</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<blockquote>
  <p><strong>#4</strong> Notice that we used <a href="https://msdn.microsoft.com/en-us/data/jj574232.aspx">eager-loading</a>, by adding <code class="language-plaintext highlighter-rouge">.Include(post =&gt; post.Author)</code>.</p>
</blockquote>

<p>And finally update the view <code class="language-plaintext highlighter-rouge">Views/Home/Index.cshtml</code> as this:</p>
<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>model IEnumerable<span class="nt">&lt;YCodingForum.Models.Post&gt;</span>
@{ViewBag.Title = "Home Page";}

<span class="nt">&lt;h1&gt;</span>YCodingForum<span class="nt">&lt;/h1&gt;</span>

<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
    @foreach (var post in Model)
    {
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-md-12"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;h2&gt;</span>
                @post.Title <span class="nt">&lt;br</span> <span class="nt">/&gt;</span>
                <span class="nt">&lt;small&gt;</span>@post.Lead<span class="nt">&lt;/small&gt;</span>
            <span class="nt">&lt;/h2&gt;</span>
            <span class="nt">&lt;p&gt;</span>@post.Content<span class="nt">&lt;/p&gt;</span>
            <span class="nt">&lt;small&gt;</span>by @post.Author.Email<span class="nt">&lt;/small&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
    }
<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"text-right"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"/Posts"</span> <span class="na">class=</span><span class="s">""</span><span class="nt">&gt;</span>more posts...<span class="nt">&lt;/a&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre></div></div>

<h3 id="what-now">What now?</h3>
<p>That’s it. You have a really primitive forum application. It would be nice if we could comment on the posts as well! Why don’t you go ahead and try to implement the comments? Hint: they have a relationship <code class="language-plaintext highlighter-rouge">many-to-one</code> with ApplicationUser and another <code class="language-plaintext highlighter-rouge">many-to-one</code> to <code class="language-plaintext highlighter-rouge">Post</code>.</p>

<p>You can found the entire application above at <a href="https://github.com/lucasdavid/YCodingForum">github.com/lucasdavid/YCodingForum</a>. Feel free to clone, fork and play with it. Furthermore, there is still so much to be done! Please visit <a href="http://www.asp.net/mvc">asp.net/mvc</a> for more information and tutorials on .NET MVC.</p>

<h2 id="conclusion">Conclusion</h2>
<p>Look at what we’ve done: the creation was just a tiny step and we were able to consistently separate what’s logic code and what’s view code pretty easily. The downside is that MVC frameworks require you to understand their functioning and, of course, it takes time for you to get used with it. Until there, you’ll need to constantly search for <code class="language-plaintext highlighter-rouge">how to do it</code> on Google. However, it will eventually payoff with much cleaner code and, obviously, better days of debugging. Besides, their structures will eventually become as natural to you as the language that you program with is.</p>

<p>In any case, you can always keep a basic structure created by yourself and use if for all your future projects! This already increases your code’s quality by 100%!</p>

<h2 id="some-references">Some references</h2>
<p>Bellow there is a list of great MVC frameworks. All of them are currently maintained by a great number of programmers, they have extensive documentation and, of course, are absolutely free.</p>

<ul>
  <li><a href="http://www.asp.net/mvc">.NET MVC</a>: the one that I used here. Its native Repository/Unit of Work patterns implementations, Linq and its huge reliability make this framework my favorite.</li>
  <li><a href="https://jhipster.github.io/">jHipster</a>: integrates a <a href="http://projects.spring.io/spring-boot/">Spring boot REST back-end</a> and an <a href="https://angularjs.org/">AngularJS front-end</a>. It’s nice, if you like Java.</li>
  <li><a href="https://www.djangoproject.com/">Django</a>: a Python MVC framework. Enough said.</li>
  <li><a href="http://laravel.com/">Laravel</a>: a PHP framework that doesn’t suck.</li>
</ul>

        </div>
      </article>

      
      <div id="disqus_thread"></div>
<script>
    /**
    *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
    *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables    */
    /*
    var disqus_config = function () {
    this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
    this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
    */
    (function() { // DON'T EDIT BELOW THIS LINE
    var d = document, s = d.createElement('script');
    s.src = 'https://lucasdavid-github-io.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

      
    </div>
  </div>
</div>
<div class="empty-v-space d-none d-xl-block" style="margin-bottom: 10vh"></div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css"
  integrity="sha384-MlJdn/WNKDGXveldHDdyRP1R4CTHr3FeuDNfhsLPYrq2t0UBkUdK2jyTnXPEK1NQ" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.js"
  integrity="sha384-VQ8d8WVFw0yHhCk5E8I86oOhv48xLpnDZx5T9GogA/Y84DcCKWXDmSDfn13bzFZY" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/contrib/auto-render.min.js"
  integrity="sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR" crossorigin="anonymous"
  onload="renderMathInElement(document.body, {delimiters: [{left: '$$', right: '$$', display: true},{left: '\\[', right: '\\]', display: true}, {left: '$', right: '$', display: false},{left: '\\(', right: '\\)', display: false}]});"></script>

<script src="https://cdn.jsdelivr.net/npm/anchor-js/anchor.min.js"></script>
<script>
  anchors.options = { icon: '#' };
  anchors.add();
</script>


  <!-- <svg id="visual" viewBox="0 0 1980 300"  class="curve-container__curve curve-three" xmlns="http://www.w3.org/2000/svg"
  xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1">
  <path
    d="M0 69L55 90.2C110 111.3 220 153.7 330 169.8C440 186 550 176 660 165.5C770 155 880 144 990 139.2C1100 134.3 1210 135.7 1320 137.7C1430 139.7 1540 142.3 1650 155.5C1760 168.7 1870 192.3 1925 204.2L1980 216L1980 301L1925 301C1870 301 1760 301 1650 301C1540 301 1430 301 1320 301C1210 301 1100 301 990 301C880 301 770 301 660 301C550 301 440 301 330 301C220 301 110 301 55 301L0 301Z"
    fill="#d3d3d3"></path>
  <path
    d="M0 89L55 107.8C110 126.7 220 164.3 330 191.3C440 218.3 550 234.7 660 243.8C770 253 880 255 990 252.3C1100 249.7 1210 242.3 1320 228.8C1430 215.3 1540 195.7 1650 174.5C1760 153.3 1870 130.7 1925 119.3L1980 108L1980 301L1925 301C1870 301 1760 301 1650 301C1540 301 1430 301 1320 301C1210 301 1100 301 990 301C880 301 770 301 660 301C550 301 440 301 330 301C220 301 110 301 55 301L0 301Z"
    fill="#6a6a6a"></path>
  <path
    d="M0 229L55 232.3C110 235.7 220 242.3 330 244.3C440 246.3 550 243.7 660 247.3C770 251 880 261 990 254.8C1100 248.7 1210 226.3 1320 223.5C1430 220.7 1540 237.3 1650 233.8C1760 230.3 1870 206.7 1925 194.8L1980 183L1980 301L1925 301C1870 301 1760 301 1650 301C1540 301 1430 301 1320 301C1210 301 1100 301 990 301C880 301 770 301 660 301C550 301 440 301 330 301C220 301 110 301 55 301L0 301Z"
    fill="#121212"></path>
</svg> -->
<footer class="page-footer text-bg-dark bg-black-subtle d-print-none">
  <div class="container">
    <div class="mt-4 mb-5">
      
        <div class="row g-1 mb-4">
          
          <div class="col">
            <div class="card bg-black-subtle border-0 border-start border-dark rounded-0">
              <div class="card-body font-small pt-0 pb-0">
                <h6 class="card-title fw-bold text-light">Keras Explainable</h6>
                <p class="card-text text-light">
                  Clean implementations for AI explaining methods in Keras.
<a href="https://github.com/lucasdavid/keras-explainable" target="_new">Code</a> and
<a href="https://lucasdavid.github.io/keras-explainable" target="_new">docs</a> are available.
                </p>
              </div>
            </div>
          </div>
          
          <div class="col">
            <div class="card bg-black-subtle border-0 border-start border-dark rounded-0">
              <div class="card-body font-small pt-0 pb-0">
                <h6 class="card-title fw-bold text-light">Supporting Study Material</h6>
                <p class="card-text text-light">
                  If you are an undergrad student and are looking for additional study material,
check out our collaborative project <a href="http://comp-ufscar.github.io/">comp-ufscar.github.io</a>.
                </p>
              </div>
            </div>
          </div>
          
          <div class="col">
            <div class="card bg-black-subtle border-0 border-start border-dark rounded-0">
              <div class="card-body font-small pt-0 pb-0">
                <h6 class="card-title fw-bold text-light">Algorithms in TensorFlow</h6>
                <p class="card-text text-light">
                  I'm implementing all algorithms I find interesting using TensorFlow.
You can check it out at <a href="https://github.com/lucasdavid/algorithms-in-tensorflow/">github.com/lucasdavid/algorithms-in-tensorflow</a>.
                </p>
              </div>
            </div>
          </div>
          
          <div class="col">
            <div class="card bg-black-subtle border-0 border-start border-dark rounded-0">
              <div class="card-body font-small pt-0 pb-0">
                <h6 class="card-title fw-bold text-light">TF-Experiment</h6>
                <p class="card-text text-light">
                  And environment to run Machine Learning experiments based on components and mixins. Available at <a href="https://github.com/lucasdavid/tf-experiment">github.com/lucasdavid/tf-experiment</a>.
                </p>
              </div>
            </div>
          </div>
          
          <div class="col">
            <div class="card bg-black-subtle border-0 border-start border-dark rounded-0">
              <div class="card-body font-small pt-0 pb-0">
                <h6 class="card-title fw-bold text-light">Mineração de Dados Complexos</h6>
                <p class="card-text text-light">
                  Information around the extension program "Mineração de Dados Complexos (in Portuguese)" is available at
<a href="https://www.ic.unicamp.br/~mdc/" target="_blank">ic.unicamp.br/~mdc/</a>.
                </p>
              </div>
            </div>
          </div>
          
        </div>
        
    </div>

    <div class="text-end mt-4">
      


<div class="fs-2">
  
    <a href="https://github.com/lucasdavid"
      target="_blank"
      ><i
      aria-label="GitHub"
      class="bi bi-github link-light"></i></a>
  
  
    <a href="https://www.linkedin.com/in/ld7"
      target="_blank"
      title="LinkedIn"><i class="bi bi-linkedin text-primary sr-none"></i></a>
  
  <span itemscope itemtype="https://schema.org/Person">
    <a itemprop="sameAs" content="https://orcid.org/0000-0002-8793-7300" href="https://orcid.org/0000-0002-8793-7300"
       target="orcid.widget"
       rel="me noopener noreferrer"
       title="ORCID"
      ><img src="/assets/images/infra/32px-ORCID_iD.webp" alt="ORCID logo" class="sr-none" style="margin-bottom: 7px; width: 32px;"></a>
  </span>
  
  <a href="http://stackoverflow.com/users/2429640/lucasdavid"
     target="_blank"
     title="Stackoverflow"><i class="bi bi-code-slash link-light sr-none"></i></a>
  
    <a href="https://youtube.com/channel/UC7IWeKUy4OSlC5ripcQGD6Q"
      target="_blank"
      title="Youtube"><i class="bi bi-youtube text-danger sr-none"></i></a>
  
    <a href="mailto:mb37410l3@mozmail.com"
      target="_blank"
      title="Mail"><i class="bi bi-envelope-fill link-light sr-none"></i></a>
  
  <a href="assets/docs/lucas-david-resume.pdf"
     target="_blank"
     title="Resume"><i class="bi bi-person-lines-fill link-light sr-none"></i></a>
</div>

    </div>
    <div class="text-end">
      <p>
        ® Lucas David. Todos os direitos reservados.
      </p>
    </div>
</div>
</footer>

  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
    integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
    crossorigin="anonymous" defer></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"
    integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy"
    crossorigin="anonymous" defer></script>

</body>
</html>
